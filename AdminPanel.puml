@startuml
!include https://raw.githubusercontent.com/bschwarz/puml-themes/master/themes/cerulean-outline/puml-theme-cerulean-outline.puml
skinparam backgroundColor #F1F6F5
skinparam ArrowThickness 1

header Admin Panel

frame **AdminPanel** {
  [DjangoPanel]
  [Nginx]
  package StaticFiles
  database Postgres
  actor Менеджер as Client

}

Client -> Nginx: Запрос на подключение
Nginx -> DjangoPanel: Подключение
DjangoPanel <-> Postgres
Nginx -down-> StaticFiles
StaticFiles -> Client

frame **FullTextSearch** {
  [ETL]
  database Elasticsearch
}

Postgres ------> ETL: Извлечение данных
ETL -> Elasticsearch: Загрузка данных

frame **AsyncApi** {
  database RedisCluster
  [FastapiApp]
  [Nginx] as Nginx2
  actor Клиенты as Clients
}

ETL -up-> FastapiApp
FastapiApp <-up-> RedisCluster: Кеширование
Clients -down-> Nginx2
Nginx2 --> FastapiApp

frame **Auth** {
  database Postgres as Postgres2
  database Redis
  [FlaskApp]
  [Nginx] as Nginx3
}

FastapiApp -> Nginx3
Nginx3 --> [FlaskApp]
[FlaskApp] -down-> Postgres2
[FlaskApp] -down-> Redis

@enduml
